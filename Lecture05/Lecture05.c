#include <stdio.h>
#include <conio.h>  // getch() 사용 (Windows 전용)

int main()
{
    // -------------------------------
    // [1] 입력 받을 배열 준비
    // -------------------------------
    char name[32]; // 문자 32개짜리 배열 (문자열 저장용)
    char c;        // 단일 문자 입력용 변수
    char* p = name; // 포인터 p는 배열 name의 시작 주소를 가리킴

    printf("이름을 입력하세요 (scanf 사용): ");
    // scanf("%s", name);
    // - %s는 공백(스페이스, 엔터) 이전까지만 읽음.
    // - name은 배열이므로 &를 붙이지 않음 (배열명 자체가 주소!)
    // scanf_s("%s", name, sizeof(name));
    // ⚠️ scanf_s는 보안형 함수: 버퍼 크기를 반드시 함께 전달해야 함.
    //     - "%s" 입력 시, 다음 인자로 배열 크기(size_t)를 줘야 함.
    //     - 내부에서 입력 길이 초과를 감지하고 자동으로 '\0'을 붙임.
    //     - 그렇지 않으면 런타임 오류 발생!
    scanf_s("%s", name, (unsigned int)sizeof(name));

    printf("입력된 이름(배열 내용): %s\n", name);
    printf("name의 시작 주소: %p\n", name);
    printf("포인터 p가 가리키는 주소: %p, 값: %c\n", p, *p);

    // -------------------------------
    // [2] getchar() — 한 문자씩 입력받기
    // -------------------------------
    printf("\n문자 하나를 입력하세요 (getchar 사용): ");
    // getchar()는 입력 버퍼에 쌓인 첫 문자(엔터 포함)를 반환
    
    // 이전 scanf의 엔터가 남아있을 수도 있으므로 버퍼 정리용 getchar() 추가
    getchar(); // 버퍼에 남은 '\n' 제거용

    c = getchar();
    printf("입력된 문자: %c\n", c);

    // -------------------------------
    // [3] getch() — 즉시 입력(버퍼 없음)
    // -------------------------------
    printf("\n문자 하나를 입력하세요 (getch 사용, 화면에 안보임): ");
    // getch()는 엔터 없이 즉시 동작하고, 콘솔에 문자를 표시하지 않음.
    char secret = _getch();
    printf("\n입력된 문자(비밀): %c\n", secret);

    // -------------------------------
    // [4] 포인터로 접근하여 배열 조작
    // -------------------------------
    printf("\n포인터를 이용해 이름의 각 문자를 출력:\n");
    for (int i = 0; *(p + i) != '\0'; i++) {
        printf("[%d번째 문자] 주소=%p, 값=%c\n", i, (p + i), *(p + i));
    }

    // -------------------------------
    // [요약 정리]
    // -------------------------------
    printf("\n=== 요약 ===\n");
    printf("scanf   : 문자열 단위 입력 (공백 전까지만)\n");
    printf("getchar : 버퍼에 입력된 문자 하나씩 읽음 (엔터 필요)\n");
    printf("getch   : 버퍼 없이 즉시 입력 (엔터 불필요, 콘솔 출력 없음)\n");
    printf("배열명  : 배열의 시작 주소 자체를 의미\n");
    printf("포인터  : 배열 원소에 직접 접근 가능 (*p, p+i 등)\n");

    return 0;
}
